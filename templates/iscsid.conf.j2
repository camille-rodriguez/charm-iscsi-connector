###############################################################################
# [ WARNING ]
# configuration file maintained by Juju
# local changes will be overwritten.
###############################################################################
iscsid.startup = /bin/systemctl start iscsid.socket
node.startup = {{ node_startup }}
node.leading_login = No
node.session.timeo.replacement_timeout = 120
node.conn[0].timeo.login_timeout = 15
node.conn[0].timeo.logout_timeout = 15
node.conn[0].timeo.noop_out_interval = 5
node.conn[0].timeo.noop_out_timeout = 5
node.session.err_timeo.abort_timeout = 15
node.session.err_timeo.lu_reset_timeout = 30
node.session.err_timeo.tgt_reset_timeout = 30
node.session.initial_login_retry_max = 8
node.session.cmds_max = 128
node.session.queue_depth = 32
node.session.xmit_thread_priority = -20
node.session.iscsi.InitialR2T = No
node.session.iscsi.ImmediateData = Yes
node.session.iscsi.FirstBurstLength = 262144
node.session.iscsi.MaxBurstLength = 16776192
node.conn[0].iscsi.MaxRecvDataSegmentLength = 262144
node.conn[0].iscsi.MaxXmitDataSegmentLength = 0
discovery.sendtargets.iscsi.MaxRecvDataSegmentLength = 32768
node.session.nr_sessions = 1
node.session.iscsi.FastAbort = {{ node_fastabort }}
node.session.scan = {{ node_session_scan }}
{% if auth_authmethod == 'CHAP' -%}
node.session.auth.authmethod = CHAP
{% if auth_username != '' -%}
node.session.auth.username = {{ auth_username }}
{% endif -%}
{% if auth_password != '' -%}
node.session.auth.password = {{ auth_password }}
{% endif -%}
{% if auth_username_in != '' -%}
node.session.auth.username.in = {{ auth_username_in }}
{% endif -%}
{% if auth_password_in != '' -%}
node.session.auth.password.in = {{ auth_password_in }}
{% endif -%}
{% endif %}
